<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>COMCAST Dashboard | Dashboard</title>
  <!-- Favicon -->
  <link rel="shortcut icon" href="./img/svg/images.png" type="image/x-icon">
  <!-- Custom styles -->
  <link rel="stylesheet" href="./css/style.css">
  
 <style>
        .progress-container {
            width: 100%;
            border-radius: 20px;
            padding: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .progress-bar {
            width: 0%;
            height: 100%;
            background-color: #4caf50;
            border-radius: 15px;
            transition: width 0.5s ease;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
        }

        .status-text {
            text-align: center;
            margin-top: 10px;
            font-size: 1.1em;
            color: #767676;
        }
		
      table {
            width: 100%;
            margin: auto;
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid black;
            text-align: center;
            padding: 8px;
        }
        .center {
            text-align: center;
            margin-bottom: 20px;
        }
        #chartContainer {
            width: 100%;
            margin: auto;
            background-color: #1E1E2F;
            padding: 20px;
            border-radius: 10px;
    </style>
</head>

<body>
<div class="layer"></div>
<!-- ! Body -->
<a class="skip-link sr-only" href="#skip-target">Skip to content</a>
<div class="page-flex">


  <!-- ! Sidebar -->
  <aside class="sidebar">
    <div class="sidebar-start">
        <div class="sidebar-head">
            <span class="sidebar-user-img">	
	<picture><source srcset="./img/svg/images.png" type="image/webp"><img src="./img/svg/images.png" alt="User name"></picture>
	</span>
            <a href="/" class="logo-wrapper" title="Home">
                <span class="sr-only">Home</span>
                <span class="icon" aria-hidden="true"></span>
                <div class="logo-text">
                    <span class="logo-title">COMCAST</span>
                    <span class="logo-subtitle">Dashboard</span>
                </div>
            </a>
            <button class="sidebar-toggle transparent-btn" title="Menu" type="button">
                <span class="sr-only">Toggle menu</span>
                <span class="icon menu-toggle" aria-hidden="true"></span>
            </button>
        </div>
        <div class="sidebar-body">
            <ul class="sidebar-body-menu">
              
                <li>
                    <a class="active" href="/"><span class="icon home" aria-hidden="true"></span>BILL RUN Statistics</a>
                </li>
                <li>
				 <li>
                    <a class="show-cat-btn" href="##">
                        <span class="icon folder" aria-hidden="true"></span>Categories
                        <span class="category__btn transparent-btn" title="Open list">
                            <span class="sr-only">Open list</span>
                            <span class="icon arrow-down" aria-hidden="true"></span>
                        </span>
                    </a>
                    <ul class="cat-sub-menu">
                        <li>
                            <a href="APPLY_ALLOCATE.html">Apply Allocate</a>
                        </li>
						<li>
                            <a href="Invoice_Printing.html">Invoice_Printing</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a class="show-cat-btn" href="##">
                        <span class="icon user-3" aria-hidden="true"></span>Users
                        <span class="category__btn transparent-btn" title="Open list">
                            <span class="sr-only">Open list</span>
                            <span class="icon arrow-down" aria-hidden="true"></span>
                        </span>
                    </a>
                    <ul class="cat-sub-menu">
                        <li>
                            <a href="users-01.html">Users-01</a>
                        </li>
                        <li>
                            <a href="users-02.html">Users-02</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="##"><span class="icon setting" aria-hidden="true"></span>Settings</a>
                </li>
            </ul>
        </div>
    </div>
    <div class="sidebar-footer">
        <a href="##" class="sidebar-user">
            <span class="sidebar-user-img">
                <picture><source srcset="./img/avatar/avatar-illustrated-02.webp" type="image/webp"><img src="./img/avatar/avatar-illustrated-02.png" alt="User name"></picture>
            </span>
            <div class="sidebar-user-info">
                <span class="sidebar-user__title">Aravinth</span>
                <span class="sidebar-user__subtitle">Support manager</span>
            </div>
        </a>
    </div>
</aside>


  <div class="main-wrapper">
    <!-- ! Main nav -->

    <nav class="main-nav--bg">
  <div class="container main-nav">
    <div class="main-nav-start">
      <div class="search-wrapper">
        <i data-feather="search" aria-hidden="true"></i>
        <input type="text" placeholder="Enter keywords ..." required>
      </div>
    </div>
    <div class="main-nav-end">
      <button class="sidebar-toggle transparent-btn" title="Menu" type="button">
        <span class="sr-only">Toggle menu</span>
        <span class="icon menu-toggle--gray" aria-hidden="true"></span>
      </button>
      
      <div class="lang-switcher-wrapper">
        <button class="lang-switcher transparent-btn" id="selected-date">
            Select Date
            <i data-feather="chevron-down" aria-hidden="true"></i>
        </button>
        <ul class="lang-menu dropdown" id="date-list"></ul>
    </div>


	  
      <button class="theme-switcher gray-circle-btn" type="button" title="Switch theme">
        <span class="sr-only">Switch theme</span>
        <i class="sun-icon" data-feather="sun" aria-hidden="true"></i>
        <i class="moon-icon" data-feather="moon" aria-hidden="true"></i>
      </button>
      <div class="nav-user-wrapper">
        <button href="##" class="nav-user-btn dropdown-btn" title="My profile" type="button">
          <span class="sr-only">My profile</span>
          <span class="nav-user-img">
            <picture><source srcset="./img/avatar/avatar-illustrated-02.webp" type="image/webp"><img src="./img/avatar/avatar-illustrated-02.png" alt="User name"></picture>
          </span>
        </button>
        <ul class="users-item-dropdown nav-user-dropdown dropdown">
          <li><a href="##">
              <i data-feather="user" aria-hidden="true"></i>
              <span>Profile</span>
            </a></li>
          <li><a href="##">
              <i data-feather="settings" aria-hidden="true"></i>
              <span>Account settings</span>
            </a></li>
          <li><a class="danger" href="##">
              <i data-feather="log-out" aria-hidden="true"></i>
              <span>Log out</span>
            </a></li>
        </ul>
      </div>
    </div>
  </div>
</nav>

    <!-- ! Main -->

    <main class="main users chart-page" id="skip-target">
      <div  class="container">
        <h2 class="main-title" >Dashboard</h2>
        <div class="row stat-cards">
          <div class="col-md-6 col-xl-3">
            <article class="stat-cards-item">
              <div class="stat-cards-icon primary">
                <i data-feather="bar-chart-2" aria-hidden="true"></i>
              </div>
              <div class="stat-cards-info" id="content">
                <p class="stat-cards-info__num" id="total">Total: ---</p>
                <p class="stat-cards-info__title">Total CUSTOMERS</p>
                <p class="stat-cards-info__progress">
                  <span class="stat-cards-info__profit success">
                    <i data-feather="trending-up" aria-hidden="true"></i>0.67%
                  </span>
                  Last month
                </p>
              </div>
            </article>
          </div>
          <div class="col-md-6 col-xl-3">
            <article class="stat-cards-item">
              <div class="stat-cards-icon success">
                <i data-feather="file" aria-hidden="true"></i>
              </div>
              <div class="stat-cards-info">
                <p class="stat-cards-info__num" id="revenue">Revenue: ---</p>
                <p class="stat-cards-info__title">Total REVENUE</p>
                <p class="stat-cards-info__progress">
                  <span class="stat-cards-info__profit success">
                    <i data-feather="trending-up" aria-hidden="true"></i>0.24%
                  </span>
                  Last month
                </p>
              </div>
            </article>
          </div>
          <div class="col-md-6 col-xl-3">
            <article class="stat-cards-item">
              <div class="stat-cards-icon purple">
                <i data-feather="file" aria-hidden="true"></i>
              </div>
              <div class="stat-cards-info">
                <p class="stat-cards-info__num" id="success">Success: ---</p>
                <p class="stat-cards-info__title">SUCCESS</p>
                <p class="stat-cards-info__progress">
                  <span class="stat-cards-info__profit success">
                    <i data-feather="trending-up" aria-hidden="true"></i>0.67%
                  </span>
                  Last month
                </p>
              </div>
            </article>
          </div>
          <div class="col-md-6 col-xl-3">
            <article class="stat-cards-item">
              <div class="stat-cards-icon warning">
                <i data-feather="feather" aria-hidden="true"></i>
              </div>
              <div class="stat-cards-info">
                <p class="stat-cards-info__num" id="error">Error: ---  </p>
                <p class="stat-cards-info__title">ERROR CUSTOMERS</p>
                <p class="stat-cards-info__progress">
                  <span class="stat-cards-info__profit warning">
                    <i data-feather="trending-up" aria-hidden="true"></i>0.00%
                  </span>
                  Last month
                </p>
              </div>
            </article>
          </div>
        </div>
        </div>

        <div class="container">
        <div class="row">
          <div class="col-lg-9">
            <div class="chart" >
              <canvas id="myChart" aria-label="Site statistics" role="img"></canvas>
            </div>
			
			 <div class="progress-container" >
      <div class="status-text" id="status-text"> Progress: Not Started</div></div>
      <div class="progress-container" >
      <div class="progress-bar" id="progress-bar">0%</div>
          </div>

			</div>
  
          
		<div class="col-lg-3" >
            <article class="white-block">
			               <div class="center">
        <h2>BILLING DATA COMPARISON</h2>
        <label for="billingDate1">Select First Date:</label>
        <select id="billingDate1" onchange="refreshTable()"></select>
        <label for="billingDate2">Select Second Date:</label>
        <select id="billingDate2" onchange="refreshTable()"></select>
        <button onclick="downloadCSV()">Download CSV</button>
    </div>
    <table class="data-table">
        <thead>
            <tr class="header-row">
                <th>Hours</th>
                <th id="selectedDate1">First Date</th>
                <th id="selectedDate2">Second Date</th>
                <th>Difference</th>
            </tr>
        </thead>
        <tbody id="tableContent"></tbody>
    </table>
    <div id="chartContainer">
        <canvas id="billingChart"></canvas>
    </div>
				  </div>
   </div>
   <div id="chartContainer">
        <canvas id="billingChart"></canvas>
    </div>
   </div>
  </main>
    <!-- ! Footer -->
    <footer class="footer">
  <div class="container footer--flex">
    <div class="footer-start">
      <p>2025 © Comcast Dashboard - <a href="#" target="_blank"
          rel="noopener noreferrer"></a></p>
    </div>
    <ul class="footer-end">
      <li><a href="##">About</a></li>
      <li><a href="##">Support</a></li>
      <li><a href="##">Puchase</a></li>
    </ul>
  </div>
</footer></div></div></div>
<!-- Chart library -->
<script src="./plugins/chart.min.js"></script>
<!-- Icons library -->
<script src="plugins/feather.min.js"></script>
<!-- Custom scripts -->
<script>
"use strict";

function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

document.addEventListener('DOMContentLoaded', function () {
  'use strict';

        const ctx = document.getElementById('billRunChart').getContext('2d');
        let billRunChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar'],
                datasets: [
                    {
                        label: 'CUSTOMERS',
                        data: [30, 28, 35],
                        borderColor: '#8b5cf6',
                        backgroundColor: '#8b5cf6',
                        tension: 0.4,
                        pointRadius: 4,
                        pointBackgroundColor: '#8b5cf6'
                    },
                    {
                        label: 'REVENUE',
                        data: [20, 35, 22],
                        borderColor: '#34d399',
                        backgroundColor: '#34d399',
                        tension: 0.4,
                        pointRadius: 4,
                        pointBackgroundColor: '#34d399'
                    }
                ]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        labels: {
                            color: 'white'
                        }
                    }
                },
                scales: {
                    x: {
                        ticks: { color: 'white' },
                        grid: { display: false }
                    },
                    y: {
                        ticks: { color: 'white' },
                        grid: { color: '#333' }
                    }
                }
            }
        });


</script>
<script>
        const billingData = {
            "15-JAN-2025": [100, 3000, 11000, 20000, 19000, 21000, 74000],
            "15-FEB-2025": [152, 4011, 12156, 21695, 21212, 21862, 81088],
            "15-MAR-2025": [152, 4061, 12491, 21866, 21593, 21470, 81633],
            "15-APR-2025": [200, 4500, 13000, 22500, 22000, 23000, 85000],
            "15-MAY-2025": [250, 5000, 14000, 23000, 22500, 24000, 88000]
        };

        function initializeDropdowns() {
            let dropdown1 = document.getElementById("billingDate1");
            let dropdown2 = document.getElementById("billingDate2");
            dropdown1.innerHTML = dropdown2.innerHTML = "";

            for (let date in billingData) {
                let option1 = new Option(date, date);
                let option2 = new Option(date, date);
                dropdown1.add(option1);
                dropdown2.add(option2);
            }
            dropdown1.selectedIndex = 0;
            dropdown2.selectedIndex = 1;
            refreshTable();
        }

        function refreshTable() {
            let selectedDate1 = document.getElementById("billingDate1").value;
            let selectedDate2 = document.getElementById("billingDate2").value;
            
            if (selectedDate1 === selectedDate2) {
                console.warn("Both selected dates are the same. Choose different dates.");
                return;
            }

            document.getElementById("selectedDate1").innerText = selectedDate1;
            document.getElementById("selectedDate2").innerText = selectedDate2;

            let tbody = document.getElementById("tableContent");
            tbody.innerHTML = "";
            let chartLabels = [];
            let chartData1 = [];
            let chartData2 = [];

            for (let i = 0; i < 6; i++) {
                let diff = billingData[selectedDate2][i] - billingData[selectedDate1][i];
                let row = `<tr>
                    <td>${i + 1}</td>
                    <td>${billingData[selectedDate1][i] || 0}</td>
                    <td>${billingData[selectedDate2][i] || 0}</td>
                    <td>${diff}</td>
                </tr>`;
                tbody.innerHTML += row;
                chartLabels.push(`Hour ${i + 1}`);
                chartData1.push(billingData[selectedDate1][i]);
                chartData2.push(billingData[selectedDate2][i]);
            }
            
            let totalDiff = billingData[selectedDate2][6] - billingData[selectedDate1][6];
            let totalRow = `<tr>
                <td><strong>TOTAL</strong></td>
                <td><strong>${billingData[selectedDate1][6] || 0}</strong></td>
                <td><strong>${billingData[selectedDate2][6] || 0}</strong></td>
                <td><strong>${totalDiff}</strong></td>
            </tr>`;
            tbody.innerHTML += totalRow;

            updateChart(chartLabels, chartData1, chartData2, selectedDate1, selectedDate2);
        }

        function updateChart(labels, data1, data2, label1, label2) {
            const ctx = document.getElementById("billingChart").getContext("2d");
            if (window.myChart) window.myChart.destroy();
            window.myChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [
                        { label: label1, data: data1, backgroundColor: '#8A2BE2' },
                        { label: label2, data: data2, backgroundColor: '#20B2AA' }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            labels: { color: 'white' }
                        }
                    },
                    scales: {
                        x: { ticks: { color: 'white' } },
                        y: { ticks: { color: 'white' } }
                    }
                }
            });
        }

        function downloadCSV() {
            let csvContent = "Hours,First Date,Second Date,Difference\n";
            document.querySelectorAll(".data-table tbody tr").forEach(row => {
                let rowData = Array.from(row.children).map(cell => cell.innerText).join(",");
                csvContent += rowData + "\n";
            });
            let blob = new Blob([csvContent], { type: "text/csv" });
            let a = document.createElement("a");
            a.href = URL.createObjectURL(blob);
            a.download = "billing_data_comparison.csv";
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }

        window.onload = initializeDropdowns;
</script>
<script src="js/script.js"></script>
    <script src="js/chart.js"></script>
</body>

</html>